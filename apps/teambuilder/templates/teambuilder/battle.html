<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Battle</title>
        {% load staticfiles %}
        <link rel="stylesheet" type="text/css" href={%static "teambuilder/css/battle.css"%}>
        <script src="{%static 'teambuilder/js/jquery.min.js'%}"></script>
        <script src="{%static 'teambuilder/js/battle.js'%}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script src="https://use.fontawesome.com/4d6e528798.js"></script>
    </head>
    <body>
        <div class="container">
            <!-- <div class="battle"> -->
                <div class="row">
                    <div class="col-md-4">
                        <!-- <div class="user" text-center> -->
                            <h2>{{user.username}}</h2>

                                {% if user.pkmn.all %}
                                {% for pk in user.pkmn.all %}
                                <img src="{% static "teambuilder/img/" %}{{pk.pokeid}}.png" %} />
                                {% endfor %}
                                {% else %}
                                No pokemon enlisted.
                                {% endif %}

                        <!-- </div> -->
                        <h3>VS</h3>
                        <!-- <div class="opponent" text-center> -->
                            <h2>{{opponent.username}}</h2>
                                {% if opponent.pkmn.all %}
                                {% for pk in opponent.pkmn.all %}
                                <img src="{% static "teambuilder/img/" %}{{pk.pokeid}}.png" %} />
                                {% endfor %}
                                {% else %}
                                No pokemon enlisted.
                                {% endif %}

                        <!-- </div> -->
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                    <h1 id='winner'></h1>
                    <button id="result" class="btn btn-success btn-md"><i class="fa fa-bolt fa-sm"></i> Battle! </button>
                    <button class="btn btn-danger btn-md" onClick="history.go(-1);return true;" ><i class="fa fa-backward fa-sm"></i> Go Back </button>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-4">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <h3>YOUR BATTLE HISTORY</h3>
                                <tr>
                                    <th>WINNER</th>
                                    <th>OPPONENTS</th>
                                </tr>
                                {%for match in yourmatches%}
                                <tr>
                                    <td class="left">{{match.winner_id.username}}</td>
                                    <td>{{match.winner_id.username}} VS {{match.loser_id.username}}</td>
                                </tr>
                                {%endfor%}
                            </table>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="table-responsive">
                            <table class= "table table-striped">
                                <h3>LATEST BATTLES</h3>
                                <tr>
                                    <th>WINNER</th>
                                    <th>OPPONENTS</th>
                                </tr>
                                {%for match in allmatches%}
                                <tr>
                                    <td class="left">{{match.winner_id.username}}</td>
                                    <td>{{match.winner_id.username}} VS {{match.loser_id.username}}</td>
                                </tr>
                                {%endfor%}
                            </table>
                        </div>
                    </div>

                <!-- </div> -->
            </div>
        </div>

    </body>
</html>
